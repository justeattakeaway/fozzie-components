{"version":3,"file":"5.8d26755d.iframe.bundle.js","sources":["webpack:///../components/organisms/f-content-cards/node_modules/@braze/web-sdk/src/FeatureFlags/feature-flag.js","webpack:///../components/organisms/f-content-cards/node_modules/@braze/web-sdk/src/FeatureFlags/feature-flag-factory.js","webpack:///../components/organisms/f-content-cards/node_modules/@braze/web-sdk/src/FeatureFlags/feature-flags-provider.js","webpack:///../components/organisms/f-content-cards/node_modules/@braze/web-sdk/src/FeatureFlags/feature-flags-provider-factory.js","webpack:///../components/organisms/f-content-cards/node_modules/@braze/web-sdk/src/FeatureFlags/refresh-feature-flags.js"],"sourcesContent":["import r from \"../../shared-lib/braze-shared-lib.js\";\nexport default class FeatureFlag {\n  constructor(t, r = !1, e = {}, s) {\n    (this.id = t),\n      (this.enabled = r),\n      (this.properties = e),\n      (this.trackingString = s),\n      (this.id = t),\n      (this.enabled = r),\n      (this.properties = e),\n      (this.trackingString = s);\n  }\n  getStringProperty(t) {\n    const r = this.properties[t];\n    return null == r\n      ? (this.Er(t), null)\n      : this.Ir(r)\n      ? r.value\n      : (this.Nr(\"string\"), null);\n  }\n  getNumberProperty(t) {\n    const r = this.properties[t];\n    return null == r\n      ? (this.Er(t), null)\n      : this.Tr(r)\n      ? r.value\n      : (this.Nr(\"number\"), null);\n  }\n  getBooleanProperty(t) {\n    const r = this.properties[t];\n    return null == r\n      ? (this.Er(t), null)\n      : this.Ar(r)\n      ? r.value\n      : (this.Nr(\"boolean\"), null);\n  }\n  ss() {\n    const t = {};\n    return (\n      (t[FeatureFlag.hs.ns] = this.id),\n      (t[FeatureFlag.hs.Fe] = this.enabled),\n      (t[FeatureFlag.hs.we] = this.properties),\n      (t[FeatureFlag.hs.ze] = this.trackingString),\n      t\n    );\n  }\n  Nr(t) {\n    r.j.info(`Property is not of type ${t}.`);\n  }\n  Er(t) {\n    r.j.info(`${t} not found in feature flag properties.`);\n  }\n  Ir(t) {\n    return \"string\" === t.type && \"string\" == typeof t.value;\n  }\n  Tr(t) {\n    return \"number\" === t.type && \"number\" == typeof t.value;\n  }\n  Ar(t) {\n    return \"boolean\" === t.type && \"boolean\" == typeof t.value;\n  }\n}\n(FeatureFlag.hs = { ns: \"id\", Fe: \"e\", we: \"pr\", ze: \"fts\" }),\n  (FeatureFlag.Tt = { ns: \"id\", Fe: \"enabled\", we: \"properties\", ze: \"fts\" });\n","import r from \"../../shared-lib/braze-shared-lib.js\";\nimport FeatureFlag from \"./feature-flag.js\";\nexport function newFeatureFlagFromJson(e) {\n  if (e[FeatureFlag.Tt.ns] && \"boolean\" == typeof e[FeatureFlag.Tt.Fe])\n    return new FeatureFlag(\n      e[FeatureFlag.Tt.ns],\n      e[FeatureFlag.Tt.Fe],\n      e[FeatureFlag.Tt.we],\n      e[FeatureFlag.Tt.ze],\n    );\n  r.j.info(`Unable to create feature flag from ${JSON.stringify(e, null, 2)}`);\n}\nexport function newFeatureFlagFromSerializedValue(e) {\n  if (e[FeatureFlag.hs.ns] && \"boolean\" == typeof e[FeatureFlag.hs.Fe])\n    return new FeatureFlag(\n      e[FeatureFlag.hs.ns],\n      e[FeatureFlag.hs.Fe],\n      e[FeatureFlag.hs.we],\n      e[FeatureFlag.hs.ze],\n    );\n  r.j.info(\n    `Unable to deserialize feature flag from ${JSON.stringify(e, null, 2)}`,\n  );\n}\n","import r from \"../../shared-lib/braze-shared-lib.js\";\nimport y from \"../common/base-provider.js\";\nimport e from \"../managers/braze-instance.js\";\nimport { STORAGE_KEYS as i } from \"../managers/storage-manager.js\";\nimport E from \"../managers/subscription-manager.js\";\nimport { randomInclusive as D } from \"../util/math.js\";\nimport C from \"../util/net.js\";\nimport {\n  newFeatureFlagFromJson as st,\n  newFeatureFlagFromSerializedValue as it,\n} from \"./feature-flag-factory.js\";\nimport T from \"../util/request-header-utils.js\";\nexport default class er extends y {\n  constructor(t, s, i) {\n    super(),\n      (this.wt = t),\n      (this.gt = s),\n      (this.u = i),\n      (this.pi = []),\n      (this.gi = 0),\n      (this.wt = t),\n      (this.gt = s),\n      (this.u = i),\n      (this.Fi = null),\n      (this.wi = new E()),\n      (this.yi = 10),\n      (this.ji = null),\n      (this.bi = null),\n      e.jt(this.wi);\n  }\n  Ts(t) {\n    if ((!this.wt || this.wt.vi()) && null != t && t.feature_flags) {\n      this.pi = [];\n      for (const s of t.feature_flags) {\n        const t = st(s);\n        t && this.pi.push(t);\n      }\n      (this.gi = new Date().getTime()), this.Ti(), this.wi.Et(this.pi);\n    }\n  }\n  Di() {\n    let t = {};\n    this.u && (t = this.u.v(i.k.Ri));\n    const s = {};\n    for (const i in t) {\n      const e = it(t[i]);\n      e && (s[e.id] = e);\n    }\n    return s;\n  }\n  Ni() {\n    var t;\n    return (null === (t = this.u) || void 0 === t ? void 0 : t.v(i.k.qi)) || {};\n  }\n  xi(t) {\n    this.u && this.u.D(i.k.qi, t);\n  }\n  ri(t) {\n    return this.wi.lt(t);\n  }\n  refreshFeatureFlags(t, s, i = !1, e = !0) {\n    if (!this.zi(i))\n      return (\n        !this.Fi &&\n          this.wt &&\n          (this.Fi = this.wt.Ci(() => {\n            this.refreshFeatureFlags(t, s);\n          })),\n        void (\"function\" == typeof s && s())\n      );\n    if ((e && this.Ii(), !this.gt)) return void (\"function\" == typeof s && s());\n    const r = this.gt.Bs({}, !0),\n      h = this.gt.Hs(r, T.Os.Si);\n    let o = !1;\n    this.gt.Qs(r, () => {\n      this.gt\n        ? (T.Ws(this.u, T.Os.Si, new Date().valueOf()),\n          C.Xs({\n            url: `${this.gt.Ys()}/feature_flags/sync`,\n            headers: h,\n            data: r,\n            O: (i) => {\n              if (!this.gt.Zs(r, i, h))\n                return (o = !0), void (\"function\" == typeof s && s());\n              this.gt.ti(),\n                this.Ts(i),\n                (o = !1),\n                T.si(this.u, T.Os.Si, 1),\n                \"function\" == typeof t && t();\n            },\n            error: (t) => {\n              this.gt.ii(t, \"retrieving feature flags\"),\n                (o = !0),\n                \"function\" == typeof s && s();\n            },\n            ei: () => {\n              if (e && o && !this.bi) {\n                T.hi(this.u, T.Os.Si);\n                let e = this.ji;\n                (null == e || e < 1e3 * this.yi) && (e = 1e3 * this.yi),\n                  this.$i(Math.min(3e5, D(1e3 * this.yi, 3 * e)), t, s, i);\n              }\n            },\n          }))\n        : \"function\" == typeof s && s();\n    });\n  }\n  Ii() {\n    null != this.bi && (clearTimeout(this.bi), (this.bi = null));\n  }\n  $i(t = 1e3 * this.yi, s, i, e = !1) {\n    this.Ii(),\n      (this.bi = window.setTimeout(() => {\n        this.refreshFeatureFlags(s, i, e);\n      }, t)),\n      (this.ji = t);\n  }\n  zi(t) {\n    if (!this.wt) return !1;\n    if (!t) {\n      const t = this.wt.Mi();\n      if (null == t) return !1;\n      let s = !1;\n      if (!isNaN(t)) {\n        if (-1 === t) return r.j.info(\"Feature flag refreshes not allowed\"), !1;\n        s = new Date().getTime() >= (this.gi || 0) + 1e3 * t;\n      }\n      if (!s)\n        return (\n          r.j.info(`Feature flag refreshes were rate limited to ${t} seconds`),\n          !1\n        );\n    }\n    return this.wt.vi();\n  }\n  Ti() {\n    if (!this.u) return;\n    const t = {};\n    for (const s of this.pi) {\n      const i = s.ss();\n      t[s.id] = i;\n    }\n    this.u.D(i.k.Ri, t), this.u.D(i.k.Ui, this.gi);\n  }\n}\n","import e from \"../managers/braze-instance.js\";\nimport er from \"./feature-flags-provider.js\";\nconst ir = {\n  t: !1,\n  provider: null,\n  er: () => (\n    ir.o(),\n    ir.provider ||\n      ((ir.provider = new er(e.tr(), e.ar(), e.l())), e.dr(ir.provider)),\n    ir.provider\n  ),\n  o: () => {\n    ir.t || (e.g(ir), (ir.t = !0));\n  },\n  destroy: () => {\n    (ir.provider = null), (ir.t = !1);\n  },\n};\nexport default ir;\n","import e from \"../managers/braze-instance.js\";\nimport ir from \"./feature-flags-provider-factory.js\";\nfunction tr(r, t, a = !1) {\n  if (e.rr()) return ir.er().refreshFeatureFlags(r, t, a);\n}\nexport function refreshFeatureFlags(r, e) {\n  tr(r, e);\n}\nexport default tr;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AChJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;A","sourceRoot":""}