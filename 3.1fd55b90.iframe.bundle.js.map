{"version":3,"file":"3.1fd55b90.iframe.bundle.js","sources":["webpack:////home/runner/work/fozzie-components/fozzie-components/node_modules/@braze/web-sdk/src/FeatureFlags/feature-flag.js","webpack:////home/runner/work/fozzie-components/fozzie-components/node_modules/@braze/web-sdk/src/FeatureFlags/feature-flag-factory.js","webpack:////home/runner/work/fozzie-components/fozzie-components/node_modules/@braze/web-sdk/src/FeatureFlags/feature-flags-provider.js","webpack:////home/runner/work/fozzie-components/fozzie-components/node_modules/@braze/web-sdk/src/FeatureFlags/feature-flags-provider-factory.js","webpack:////home/runner/work/fozzie-components/fozzie-components/node_modules/@braze/web-sdk/src/FeatureFlags/refresh-feature-flags.js"],"sourcesContent":["export default class ee {\n  constructor(t, s = !1, i = {}) {\n    (this.id = t), (this.enabled = s), (this.properties = i);\n  }\n  ss() {\n    const t = {};\n    return (\n      (t[ee.hs.ns] = this.id),\n      (t[ee.hs.Fe] = this.enabled),\n      (t[ee.hs.we] = this.properties),\n      t\n    );\n  }\n}\n(ee.hs = { ns: \"id\", Fe: \"e\", we: \"pr\" }),\n  (ee.At = { ns: \"id\", Fe: \"enabled\", we: \"properties\" });\n","import r from \"../../shared-lib/braze-shared-lib.js\";\nimport ee from \"./feature-flag.js\";\nexport function newFeatureFlagFromJson(e) {\n  if (e[ee.At.ns] && \"boolean\" == typeof e[ee.At.Fe])\n    return new ee(e[ee.At.ns], e[ee.At.Fe], e[ee.At.we]);\n  r.D.info(`Unable to create feature flag from ${JSON.stringify(e, null, 2)}`);\n}\nexport function newFeatureFlagFromSerializedValue(e) {\n  if (e[ee.hs.ns] && \"boolean\" == typeof e[ee.hs.Fe])\n    return new ee(e[ee.hs.ns], e[ee.hs.Fe], e[ee.hs.we]);\n  r.D.info(\n    `Unable to deserialize feature flag from ${JSON.stringify(e, null, 2)}`\n  );\n}\n","import r from \"../../shared-lib/braze-shared-lib.js\";\nimport y from \"../common/base-provider.js\";\nimport e from \"../managers/braze-instance.js\";\nimport { STORAGE_KEYS as o } from \"../managers/storage-manager.js\";\nimport u from \"../managers/subscription-manager.js\";\nimport b from \"../util/net.js\";\nimport {\n  newFeatureFlagFromJson as tt,\n  newFeatureFlagFromSerializedValue as et\n} from \"./feature-flag-factory.js\";\nexport default class er extends y {\n  constructor(t, s, r) {\n    super(),\n      (this.gt = t),\n      (this.vt = s),\n      (this.h = r),\n      (this.he = new u()),\n      e.jt(this.he);\n  }\n  Rs(t) {\n    if (this.gt.ye() && null != t && t.feature_flags) {\n      this.De = [];\n      for (const e of t.feature_flags) {\n        let t = tt(e);\n        t && this.De.push(t);\n      }\n      (this.Ne = new Date().getTime()), this._e(), this.he.St(this.De);\n    }\n  }\n  xe() {\n    const t = this.h.I(o.q.ze) || {};\n    let e = {};\n    for (let s in t) {\n      let r = et(t[s]);\n      r && (e[r.id] = r);\n    }\n    return e;\n  }\n  Ws(t) {\n    return this.he.ut(t);\n  }\n  refreshFeatureFlags(t, e, s) {\n    if (!this.Re(s))\n      return void (\n        this.Se ||\n        (this.Se = this.gt.Te(() => {\n          this.refreshFeatureFlags(t, e);\n        }))\n      );\n    const r = this.vt.Ps({}, !0),\n      i = this.vt.Bs(r, !1, !0);\n    this.vt.Gs(r, () => {\n      b.Hs({\n        url: `${this.vt.Ks()}/feature_flags/sync`,\n        headers: i,\n        data: r,\n        S: s => {\n          this.vt.Os(r, s)\n            ? (this.vt.Qs(), this.Rs(s), \"function\" == typeof t && t())\n            : \"function\" == typeof e && e();\n        },\n        error: t => {\n          this.vt.Vs(t, \"retrieving feature flags\"),\n            \"function\" == typeof e && e();\n        }\n      });\n    });\n  }\n  Re(t) {\n    if (!t) {\n      const t = parseFloat(this.gt.$e());\n      let e = !1;\n      if (!isNaN(t)) {\n        if (-1 === t) return r.D.info(\"Feature flag refreshes not allowed\"), !1;\n        e = new Date().getTime() >= (this.Ne || 0) + 1e3 * t;\n      }\n      if (!e)\n        return (\n          r.D.info(`Feature flag refreshes were rate limited to ${t} seconds`),\n          !1\n        );\n    }\n    return this.gt.ye();\n  }\n  _e() {\n    const t = {};\n    for (let e = 0; e < this.De.length; e++) {\n      let s = this.De[e],\n        r = s.ss();\n      t[s.id] = r;\n    }\n    this.h.B(o.q.ze, t), this.h.B(o.q.qe, this.Ne);\n  }\n}\n","import e from \"../managers/braze-instance.js\";\nimport er from \"./feature-flags-provider.js\";\nconst ir = {\n  t: !1,\n  provider: null,\n  er: () => (\n    ir.o(),\n    ir.provider ||\n      ((ir.provider = new er(e.ir(), e.nr(), e.l())), e.ar(ir.provider)),\n    ir.provider\n  ),\n  o: () => {\n    ir.t || (e.u(ir), (ir.t = !0));\n  },\n  destroy: () => {\n    (ir.provider = null), (ir.t = !1);\n  }\n};\nexport default ir;\n","import e from \"../managers/braze-instance.js\";\nimport ir from \"./feature-flags-provider-factory.js\";\nfunction tr(r, t, a) {\n  if (e.rr()) return ir.er().refreshFeatureFlags(r, t, a);\n}\nexport function refreshFeatureFlags(r, e) {\n  tr(r, e);\n}\nexport default tr;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACbA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC7FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;A","sourceRoot":""}